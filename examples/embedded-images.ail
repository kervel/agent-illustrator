/* INTENT
   Demonstrate embedding external SVG and raster images as templates.
   This example shows:
   1. SVG file import with scaling
   2. Raster image import (PNG) with size
   3. Wrapping embedded images in groups with labels and anchors
   4. Rotation support for embedded images
*/

// === EMBEDDED SVG TEMPLATE ===
// SVG files are loaded and their content is embedded directly.
// The intrinsic dimensions from viewBox/width/height are used for scaling.

template "person_svg" from "assets/person.svg"

// === RASTER IMAGE TEMPLATES ===
// Raster images (PNG, JPG, etc.) reference the file path.
// The SVG viewer loads the image at render time.

template "logo" from "assets/logo.png"

// === TEAM USING SVG IMAGES ===

row team_svg [gap: 40] {
    group alice {
        col [gap: 4] {
            person_svg avatar [width: 60, height: 60]
            rect label_bg [width: 70, height: 20, fill: none, stroke: none, label: "Alice", font_size: 12]
        }
        anchor left_conn [position: avatar.left - 4, direction: left]
        anchor right_conn [position: avatar.right + 4, direction: right]
    }
    group bob {
        col [gap: 4] {
            person_svg avatar [width: 60, height: 60]
            rect label_bg [width: 70, height: 20, fill: none, stroke: none, label: "Bob", font_size: 12]
        }
        anchor left_conn [position: avatar.left - 4, direction: left]
        anchor right_conn [position: avatar.right + 4, direction: right]
    }
    group charlie {
        col [gap: 4] {
            person_svg avatar [width: 60, height: 60]
            rect label_bg [width: 70, height: 20, fill: none, stroke: none, label: "Charlie", font_size: 12]
        }
        anchor left_conn [position: avatar.left - 4, direction: left]
        anchor right_conn [position: avatar.right + 4, direction: right]
    }
}

// Align vertical centers for straight horizontal connections
constrain bob.center_y = alice.center_y
constrain charlie.center_y = alice.center_y

alice.right_conn -> bob.left_conn [label: "works with"]
bob.right_conn -> charlie.left_conn [label: "mentors"]

// === PNG IMAGE EXAMPLE ===

group logo_section {
    logo company_logo [width: 200, height: 50]
    text "PNG raster image" logo_label [font_size: 10, fill: text-3]
}
constrain logo_label.top = company_logo.bottom + 8
constrain logo_label.center_x = company_logo.center_x

constrain logo_section.top = team_svg.bottom + 40
constrain logo_section.center_x = team_svg.center_x

// === ROTATION EXAMPLE ===
// Embedded images support rotation just like other shapes

row rotated_icons [gap: 20] {
    person_svg i0 [width: 40, height: 40, rotation: 0]
    person_svg i15 [width: 40, height: 40, rotation: 15]
    person_svg i30 [width: 40, height: 40, rotation: 30]
    person_svg i45 [width: 40, height: 40, rotation: 45]
}

constrain rotated_icons.top = logo_section.bottom + 40
constrain rotated_icons.center_x = team_svg.center_x

text "Rotation: 0, 15, 30, 45 degrees" rotation_label [font_size: 10, fill: text-3]
constrain rotation_label.top = rotated_icons.bottom + 10
constrain rotation_label.center_x = rotated_icons.center_x
